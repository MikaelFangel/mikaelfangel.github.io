<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Commandline on MikaelFangel's Notebook</title><link>https://mikaelfangel.github.io/tags/commandline/</link><description>Recent content in Commandline on MikaelFangel's Notebook</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 16 Oct 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://mikaelfangel.github.io/tags/commandline/index.xml" rel="self" type="application/rss+xml"/><item><title>Add a background to the Obisidian icon using imagemagick</title><link>https://mikaelfangel.github.io/p/imagemagick-icon/</link><pubDate>Mon, 16 Oct 2023 00:00:00 +0000</pubDate><guid>https://mikaelfangel.github.io/p/imagemagick-icon/</guid><description>&lt;p>Recently I&amp;rsquo;ve written a review on a PR where I requested that we used the Obsidian icon from the source. However this icon is only available as an svg file with a transparent background. So I suggested that we used imagemagick to add the background to the image because we already used it in the derivation. This task is however not as trivial as it first might seem. The PR with the discussion can be found &lt;a class="link" href="https://github.com/nixOS/nixpkgs/pull/260553" target="_blank" rel="noopener"
>here&lt;/a>.&lt;/p>
&lt;p>To add the background to the image I came up with the following solution:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create the shadowed image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">convert input.png &lt;span class="se">\(&lt;/span> +clone -background &lt;span class="s2">&amp;#34;rgba(0,0,0,0.5)&amp;#34;&lt;/span> -shadow 50x5+5+5 &lt;span class="se">\)&lt;/span> +swap -background none -layers merge +repage shadowed_image.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create the rounded mask&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">convert -size XxY xc:none -fill &lt;span class="s2">&amp;#34;#232129&amp;#34;&lt;/span> -draw &lt;span class="s2">&amp;#34;roundrectangle 0,0,X,Y,35,35&amp;#34;&lt;/span> mask.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Overlay the rounded image with the shadow onto the colored background&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">convert -gravity center mask.png shadowed_image.png -composite -compose SrcIn rounded.png
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>In the solution X and Y denotes the size of the output image.&lt;/p></description></item></channel></rss>